{% extends 'unid/navigationbar.html' %}
{% load static %}
{% block content %}
<!-- Page Content -->
<link href="{% static 'unid/css/index.css' %}" rel="stylesheet">

<style>
ul {
    margin: 0;
	padding: 0;
	border: 0;
	font-size: 100%;
	font: inherit;
	vertical-align: baseline;
    list-style: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
	content: '';
	content: none;
}
}
.img-replace {
  /* replace text with an image */
  display: inline-block;
  overflow: hidden;
  text-indent: 100%;
  color: transparent;
  white-space: nowrap;
}

.cd-nugget-info {
  text-align: center;
  position: absolute;
  width: 100%;
  height: 50px;
  line-height: 50px;
  bottom: 0;
  left: 0;
}
.cd-nugget-info a {
  position: relative;
  font-size: 14px;
  color: #5e6e8d;
  -webkit-transition: all 0.2s;
  -moz-transition: all 0.2s;
  transition: all 0.2s;
}

.cd-nugget-info span {
  vertical-align: middle;
  display: inline-block;
}
.cd-nugget-info span svg {
  display: block;
}
.cd-nugget-info .cd-nugget-info-arrow {
  fill: #5e6e8d;
}

/* --------------------------------

Main components

-------------------------------- */
header {
  height: 200px;
  line-height: 200px;
  text-align: center;
  background-color: #5e6e8d;
  color: #FFF;
}
header h1 {
  font-size: 20px;
  font-size: 1.25rem;
}

.cd-popup-trigger {
  display: block;
  width: 150px;
  height: 40px;
  /* line-height: 50px; */
  text-align: center;
  color: #FFF;
  font-size: 14px;
  font-size: 0.95rem;
  border-radius: 0.5em;
  background: #fb2323d1;
  box-shadow: 0 3px 0 rgba(0, 0, 0, 0.07);
}
@media only screen and (min-width: 1170px) {
  .cd-popup-trigger {
    margin: 1em auto;
  }
}

/* --------------------------------

xpopup

-------------------------------- */
.cd-popup, .cd-popup1, .cd-popup2, .cd-popup4{
  position: fixed;
  left: 0;
  top: 0;
  height: 100%;
  width: 100%;
  background-color: #5959597d;
  opacity: 0;
  visibility: hidden;
  -webkit-transition: opacity 0.3s 0s, visibility 0s 0.3s;
  -moz-transition: opacity 0.3s 0s, visibility 0s 0.3s;
  transition: opacity 0.3s 0s, visibility 0s 0.3s;
  z-index: 1;
}
.zzz {


}
.cd-popup.is-visible, .cd-popup1.is-visible, .cd-popup2.is-visible, .cd-popup4.is-visible {
  opacity: 1;
  visibility: visible;
  -webkit-transition: opacity 0.3s 0s, visibility 0s 0s;
  -moz-transition: opacity 0.3s 0s, visibility 0s 0s;
  transition: opacity 0.3s 0s, visibility 0s 0s;
}
.cd-popup3 {
  position: fixed;
  left: 0;
  top: 0;
  height: 100%;
  width: 100%;
  background-color: #5959597d;
  opacity: 0;
  visibility: hidden;
  -webkit-transition: opacity 0.3s 0s, visibility 0s 0.3s;
  -moz-transition: opacity 0.3s 0s, visibility 0s 0.3s;
  transition: opacity 0.3s 0s, visibility 0s 0.3s;
  z-index: 1;
}

.cd-popup3.is-visible {
  opacity: 1;
  visibility: visible;
  -webkit-transition: opacity 0.3s 0s, visibility 0s 0s;
  -moz-transition: opacity 0.3s 0s, visibility 0s 0s;
  transition: opacity 0.3s 0s, visibility 0s 0s;
}
.cd-popup-container3, .cd-popup-container4 {
  position: relative;
  width: 35%;
  max-width: 500px;
  height: auto;
  margin: 9em auto;
  text-align: center;
  background: #FFF;
  -webkit-transform: translateY(-40px);
  -moz-transform: translateY(-40px);
  -ms-transform: translateY(-40px);
  -o-transform: translateY(-40px);
  transform: translateY(-40px);
  /* Force Hardware Acceleration in WebKit */
  -webkit-backface-visibility: hidden;
  -webkit-transition-property: -webkit-transform;
  -moz-transition-property: -moz-transform;
  transition-property: transform;
  -webkit-transition-duration: 0.3s;
  -moz-transition-duration: 0.3s;
  transition-duration: 0.3s;
  padding: 30px;
}

.cd-popup-preview {
    width: 100%;
    max-width: 660px;
    margin: 7.5em auto;
    height: 848.4px;
}
.cd-popup-container2 {
  position: relative;
  width: 90%;
  max-width: 500px;
  margin: 4em auto;
  background: #FFF;
  border-radius: .25em .25em .4em .4em;
  text-align: center;
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
  -webkit-transform: translateY(-40px);
  -moz-transform: translateY(-40px);
  -ms-transform: translateY(-40px);
  -o-transform: translateY(-40px);
  transform: translateY(-40px);
  /* Force Hardware Acceleration in WebKit */
  -webkit-backface-visibility: hidden;
  -webkit-transition-property: -webkit-transform;
  -moz-transition-property: -moz-transform;
  transition-property: transform;
  -webkit-transition-duration: 0.3s;
  -moz-transition-duration: 0.3s;
  transition-duration: 0.3s;
  padding: 30px;
}
.cd-popup-container1 {
  position: relative;
  width: 90%;
  max-width: 500px;
  margin: 4em auto;
  background: #FFF;
  border-radius: .25em .25em .4em .4em;
  text-align: center;
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
  -webkit-transform: translateY(-40px);
  -moz-transform: translateY(-40px);
  -ms-transform: translateY(-40px);
  -o-transform: translateY(-40px);
  transform: translateY(-40px);
  /* Force Hardware Acceleration in WebKit */
  -webkit-backface-visibility: hidden;
  -webkit-transition-property: -webkit-transform;
  -moz-transition-property: -moz-transform;
  transition-property: transform;
  -webkit-transition-duration: 0.3s;
  -moz-transition-duration: 0.3s;
  transition-duration: 0.3s;
  padding: 30px;
}
.cd-popup-container {
  position: relative;
  width: 90%;
  max-width: 400px;
  margin: 4em auto;
  background: #FFF;
  border-radius: .25em .25em .4em .4em;
  text-align: center;
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
  -webkit-transform: translateY(-40px);
  -moz-transform: translateY(-40px);
  -ms-transform: translateY(-40px);
  -o-transform: translateY(-40px);
  transform: translateY(-40px);
  /* Force Hardware Acceleration in WebKit */
  -webkit-backface-visibility: hidden;
  -webkit-transition-property: -webkit-transform;
  -moz-transition-property: -moz-transform;
  transition-property: transform;
  -webkit-transition-duration: 0.3s;
  -moz-transition-duration: 0.3s;
  transition-duration: 0.3s;
  padding: 30px;
}
.cd-popup-container p, .cd-popup-container1 p, .cd-popup-container2 p .cd-popup-container4 p{
  padding: 3em 1em;
}
.cd-popup-container .cd-buttons:after, .cd-popup-container1 .cd-buttons:after, .cd-popup-container2 .cd-buttons:after, .cd-popup-container4 .cd-buttons:after {
  content: "";
  display: table;
  clear: both;
}
.cd-popup-container .cd-buttons li, .cd-popup-container1 .cd-buttons li, .cd-popup-container2 .cd-buttons li, .cd-popup-container4 .cd-buttons li {
  float: left;
  width: 50%;
  padding: 5px 20px 10px 20px;
  list-style: none;
}
.cd-popup-container .cd-buttons a, .cd-popup-container1 .cd-buttons a, .cd-popup-container2 .cd-buttons a {
  display: block;
  height: 40px;
  line-height: 40px;
  text-transform: uppercase;
  color: #FFF;
  -webkit-transition: background-color 0.2s;
  -moz-transition: background-color 0.2s;
  transition: background-color 0.2s;
}
.cd-popup-container .cd-buttons li:first-child a, .cd-popup-container1 .cd-buttons li:first-child a, .cd-popup-container2 .cd-buttons li:first-child a {
  background: #b6bece;
  border-radius: 0 0 0 .25em;
}
.popuprow1 {
    font-weight: bold;
    padding: 30px 20px 50px;
}
.popuprow2 {
    color: grey;
    padding: 0 0 30px 0;
    font-size: 0.95rem;
    text-align: left;
}
.popupcategory {
    margin: 0 0 40px 0;
}
.popupcategory label {
    position: relative;
    right: 40px;
}
.popupcategory select {
    float: right;
    position: relative;
    bottom: 10px;
    right: 20px;
}
.popupcategory input {
    display: none;
}
.popuprow3 {
    color: grey;
    padding: 0 0 30px 0;
    font-size: 0.8rem;
}


.cd-popup-container .cd-buttons li:last-child a,
.cd-popup-container1 .cd-buttons li:last-child a,
.cd-popup-container2 .cd-buttons li:last-child a {
  background: #fc7169;
  border-radius: 0 0 .25em 0;
}

.cd-popup-container .cd-popup-close, .cd-popup-container1 .cd-popup-close, .cd-popup-container2 .cd-popup-close {
  position: absolute;
  top: 8px;
  right: 8px;
  width: 30px;
  height: 30px;
}
.cd-popup-container .cd-popup-close::before,
.cd-popup-container .cd-popup-close::after,
.cd-popup-container1 .cd-popup-close::before,
.cd-popup-container1 .cd-popup-close::after,
.cd-popup-container2 .cd-popup-close::before,
.cd-popup-container2 .cd-popup-close::after{
  content: '';
  position: absolute;
  top: 12px;
  width: 14px;
  height: 3px;
  background-color: #8f9cb5;
}
.cd-popup-container .cd-popup-close::before, .cd-popup-container1 .cd-popup-close::before, .cd-popup-container2 .cd-popup-close::before {
  -webkit-transform: rotate(45deg);
  -moz-transform: rotate(45deg);
  -ms-transform: rotate(45deg);
  -o-transform: rotate(45deg);
  transform: rotate(45deg);
  left: 8px;
}
.cd-popup-container .cd-popup-close::after, .cd-popup-container1 .cd-popup-close::after, .cd-popup-container2 .cd-popup-close::after {
  -webkit-transform: rotate(-45deg);
  -moz-transform: rotate(-45deg);
  -ms-transform: rotate(-45deg);
  -o-transform: rotate(-45deg);
  transform: rotate(-45deg);
  right: 8px;
}
.is-visible .cd-popup-container, .is-visible .cd-popup-container1, .is-visible .cd-popup-container2 {
  -webkit-transform: translateY(0);
  -moz-transform: translateY(0);
  -ms-transform: translateY(0);
  -o-transform: translateY(0);
  transform: translateY(0);
  color: black;
}
.popupinformationsrow {
    flex-direction: row;
    display: inline;
}
.popupinformations {
    color: black;
    font-weight: bold;
    float: right;
}


.picture-box {
    background: #ebeaea;
    height: 335px;
    margin: 0 auto;
    padding: 26px 0px;
    width: 1000px;
}

.d-block {
    box-shadow: 2px 2px 4px 0px #a5a2a2;
}

#link {color: #E45635;display:block;font: 12px "Helvetica Neue", Helvetica, Arial, sans-serif;text-align:center; text-decoration: none;}
#link:hover {color: #CCCCCC}

#link, #link:hover {-webkit-transition: color 0.5s ease-out;-moz-transition: color 0.5s ease-out;-ms-transition: color 0.5s ease-out;-o-transition: color 0.5s ease-out;transition: color 0.5s ease-out;}

/** BEGIN CSS **/
@keyframes rotate-loading {
    0%  {transform: rotate(0deg);-ms-transform: rotate(0deg); -webkit-transform: rotate(0deg); -o-transform: rotate(0deg); -moz-transform: rotate(0deg);}
    100% {transform: rotate(360deg);-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); -o-transform: rotate(360deg); -moz-transform: rotate(360deg);}
}

@-moz-keyframes rotate-loading {
    0%  {transform: rotate(0deg);-ms-transform: rotate(0deg); -webkit-transform: rotate(0deg); -o-transform: rotate(0deg); -moz-transform: rotate(0deg);}
    100% {transform: rotate(360deg);-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); -o-transform: rotate(360deg); -moz-transform: rotate(360deg);}
}

@-webkit-keyframes rotate-loading {
    0%  {transform: rotate(0deg);-ms-transform: rotate(0deg); -webkit-transform: rotate(0deg); -o-transform: rotate(0deg); -moz-transform: rotate(0deg);}
    100% {transform: rotate(360deg);-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); -o-transform: rotate(360deg); -moz-transform: rotate(360deg);}
}

@-o-keyframes rotate-loading {
    0%  {transform: rotate(0deg);-ms-transform: rotate(0deg); -webkit-transform: rotate(0deg); -o-transform: rotate(0deg); -moz-transform: rotate(0deg);}
    100% {transform: rotate(360deg);-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); -o-transform: rotate(360deg); -moz-transform: rotate(360deg);}
}

@keyframes rotate-loading {
    0%  {transform: rotate(0deg);-ms-transform: rotate(0deg); -webkit-transform: rotate(0deg); -o-transform: rotate(0deg); -moz-transform: rotate(0deg);}
    100% {transform: rotate(360deg);-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); -o-transform: rotate(360deg); -moz-transform: rotate(360deg);}
}

@-moz-keyframes rotate-loading {
    0%  {transform: rotate(0deg);-ms-transform: rotate(0deg); -webkit-transform: rotate(0deg); -o-transform: rotate(0deg); -moz-transform: rotate(0deg);}
    100% {transform: rotate(360deg);-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); -o-transform: rotate(360deg); -moz-transform: rotate(360deg);}
}

@-webkit-keyframes rotate-loading {
    0%  {transform: rotate(0deg);-ms-transform: rotate(0deg); -webkit-transform: rotate(0deg); -o-transform: rotate(0deg); -moz-transform: rotate(0deg);}
    100% {transform: rotate(360deg);-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); -o-transform: rotate(360deg); -moz-transform: rotate(360deg);}
}

@-o-keyframes rotate-loading {
    0%  {transform: rotate(0deg);-ms-transform: rotate(0deg); -webkit-transform: rotate(0deg); -o-transform: rotate(0deg); -moz-transform: rotate(0deg);}
    100% {transform: rotate(360deg);-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); -o-transform: rotate(360deg); -moz-transform: rotate(360deg);}
}

@keyframes loading-text-opacity {
    0%  {opacity: 0}
    20% {opacity: 0}
    50% {opacity: 1}
    100%{opacity: 0}
}

@-moz-keyframes loading-text-opacity {
    0%  {opacity: 0}
    20% {opacity: 0}
    50% {opacity: 1}
    100%{opacity: 0}
}

@-webkit-keyframes loading-text-opacity {
    0%  {opacity: 0}
    20% {opacity: 0}
    50% {opacity: 1}
    100%{opacity: 0}
}

@-o-keyframes loading-text-opacity {
    0%  {opacity: 0}
    20% {opacity: 0}
    50% {opacity: 1}
    100%{opacity: 0}
}
.loading-container,
.loading {
    height: 170px;
    position: relative;
    width: 170px;
    border-radius: 100%;
}


.loading-container { margin: 40px auto }

.loading {
    border: 2px solid transparent;
    border-color: transparent #E64C3C; transparent #E64C3C;
    -moz-animation: rotate-loading 1.5s linear 0s infinite normal;
    -moz-transform-origin: 50% 50%;
    -o-animation: rotate-loading 1.5s linear 0s infinite normal;
    -o-transform-origin: 50% 50%;
    -webkit-animation: rotate-loading 1.5s linear 0s infinite normal;
    -webkit-transform-origin: 50% 50%;
    animation: rotate-loading 1.5s linear 0s infinite normal;
    transform-origin: 50% 50%;
}

.loading-container:hover .loading {
    border-color: transparent #E45635 transparent #E45635;
}
.loading-container:hover .loading,
.loading-container .loading {
    -webkit-transition: all 0.5s ease-in-out;
    -moz-transition: all 0.5s ease-in-out;
    -ms-transition: all 0.5s ease-in-out;
    -o-transition: all 0.5s ease-in-out;
    transition: all 0.5s ease-in-out;
}

#loading-text {
    -moz-animation: loading-text-opacity 2s linear 0s infinite normal;
    -o-animation: loading-text-opacity 2s linear 0s infinite normal;
    -webkit-animation: loading-text-opacity 2s linear 0s infinite normal;
    animation: loading-text-opacity 2s linear 0s infinite normal;
    color: #ec1010;
    font-family: "Helvetica Neue, "Helvetica", ""arial";
    font-weight: bold;
    margin-top: 45px;
    opacity: 1;
    position: absolute;
    text-align: center;
    text-transform: uppercase;
    top: -10px;
    width: 167px;
}
.loading-text2 {
    font-size: 16px;
    font-weight: bold;
    color: #2F2F2F;
}
.loading-text3 {
    font-size: 14px;
    color: #989898;
    margin: 10px 0 15px 0;
    font-weight: bold;
}
@media only screen and (min-width: 349px) {
  .cd-popup-container, .cd-popup-container1, .cd-popup-container2, .cd-popup-container3 {
    margin: 8rem auto;
  }
  .cd-popup-container3 {
    margin: 13rem auto;
  }

</style>
<div class="container1">
    <!-- contents InFo -->
    <div class="rows">
        <div class="row">
            <div class="contents-info1">
                <div class="contents-kind">
                    <img src="/{{ contents.cagegory_path }}" width="75" height="25">
                </div>
                <div align="center" class="contents-title">
                    {{ contents.title }}
                </div>
                <div class="infobox"  align="center">
                    <div class="writerinfo">
                        <a href="{% url 'user_detail' contents.writeremail.IDX %}">
                            <p align="center" size="5" style="color: black;">
                                {% if contents.writeremail.userimage %}
                                <img src="/{{ contents.writeremail.userimage}}" border="0" width="35" height="35" style="border-radius: 25px;">&nbsp {{ contents.writeremail.name }}
                                {% else %}
                                <img src="/static/unid/icon/profle-icon.png" border="0" width="35" height="35">&nbsp {{ contents.writeremail.name }}
                                {% endif %}
                            </p>
                        </a>
                    </div>
                    <div class="dateinfo">
                        {{ contents.created|timesince }}전
                    </div>
                </div>
                <div class="fileinfo_box">
                    <div class="dropdown-toggle" id="nav3" data-toggle="dropdown" href="#">
                        <img src="{% static 'unid/icon/icons-첨부파일클립.png' %}" width="20" height="20" style="margin: 0 10px 0 0;">첨부 파일
                    </div>
                    <div class="dropdown-menu" id="dropdown">
                        {% for filename in files_infos %}
                        <div class="dropdown-item" href="#" style="font-size: 14px; font-weight: 300;">{{ filename.uploadfile }}  |  {{ filename.filesize }}</div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
        <!-- preview -->
        <div class="row">
            <div class="picture-box">
                <div>
                    <div class="preview pointeffect" id="preview1" name="1">
                        <img class="d-block" src="/{{ first_preview }}" alt="first slide" width="200" height="285">
                    </div>
                    <div class="preview pointeffect" id="preview2" name="2">
                        <img class="d-block" src="/{{ second_preview }}" alt="Second slide" width="200" height="285">
                    </div>
                    <div class="preview pointeffect" id="preview3" name="3">
                        <img class="d-block" src="/{{ third_preview }}" alt="Third slide" width="200" height="285">
                    </div>
                </div>
            </div>
        </div>
        <div class="cd-popup4" role="alert">
            <div class="cd-popup-container4 cd-popup-preview">
                <div>
                    <div id="carouselExampleIndicators" class="carousel slide my-4" data-ride="carousel">
                        <ol class="carousel-indicators">
                            <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active" id="preview-button1"></li>
                            {% if second_preview %}
                            {% if second_preview != "media/default.png" %}
                            <li data-target="#carouselExampleIndicators" data-slide-to="1" id="preview-button2"></li>
                            {% endif %}
                            {% if third_preview %}
                            {% if third_preview != "media/default.png" %}
                            <li data-target="#carouselExampleIndicators" data-slide-to="2" id="preview-button3"></li>
                            {% endif %}
                            {% endif %}
                            {% endif %}
                        </ol>
                        <div class="carousel-inner" role="listbox">
                            {% if first_preview %}
                            {% if first_preview != "media/default.png" %}
                            <div class="carousel-item active" id="view-preview1">
                                <img class="d-block" src="/{{ first_preview }}" alt="first slide" width="600" height="780">
                            </div>
                            {% endif %}
                            {% if second_preview %}
                            {% if second_preview != "media/default.png" %}
                            <div class="carousel-item" id="view-preview2">
                                <img class="d-block" src="/{{ second_preview }}" alt="Second slide" width="600" height="780">
                            </div>
                            {% endif %}
                            {% endif %}
                            {% if third_preview %}
                            {% if third_preview != "media/default.png" %}
                            <div class="carousel-item" id="view-preview3">
                                <img class="d-block" src="/{{ third_preview }}" alt="Third slide" width="600" height="780">
                            </div>
                            {% endif %}
                            {% endif %}
                            {% else %}

                            {% endif %}
                        </div>
                        {% if second_preview %}
                        {% if second_preview != "media/default.png" %}
                        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev" style="height: 850px;">
                            <span style="font-size: 3em; color: #dad8d8;">
                                <i class="fas fa-angle-left"></i>
                            </span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next" style="height: 850px;">
                            <span style="font-size: 3em; color: #dad8d8;">
                                <i class="fas fa-angle-right"></i>
                            </span>
                            <span class="sr-only">Next</span>
                        </a>
                        {% endif %}
                        {% endif %}
                    </div>
                </div>
            </div> <!-- cd-popup-container -->
        </div> <!-- cd-popup -->
        <!-- detail of contents -->
        <div class="row">
            <div class="contents-detail">
                <div class="contents-detail-row">
                    <div class="title">
                        저자:
                    </div>
                    <div class="context">
                        {{ contents.authorinfo }}
                    </div>
                </div>
                <div class="contents-detail-row">
                    <div class="title">
                        저작시기:
                    </div>
                    <div class="context">
                        {{ contents.publisheddate }}
                    </div>
                </div>
                <div class="contents-detail-row">
                    <div class="title">
                        소개글:
                    </div>
                    <div class="context">
                        {{ contents.intro|linebreaksbr }}
                    </div>
                </div>
                <div class="contents-detail-row">
                    <div class="title">
                        목차:
                    </div>
                    <div class="context">
                        {{ contents.index|linebreaksbr }}
                    </div>
                </div>
                <div class="contents-detail-row">
                    <div class="title">
                        본문내용:
                    </div>
                    <div class="context">
                        {{ contents.contents|linebreaksbr }}
                    </div>
                </div>
                <div class="contents-detail-row">
                    <div class="title">
                        참고문헌:
                    </div>
                    <div class="context">
                        {{ contents.reference|linebreaksbr }}
                    </div>
                </div>
            </div>
        </div>
        <!-- payment -->
        <div class="row">
            <div class="contents-payment">
                <div>
                    <p><img src="{% static 'unid/icon/dollar-icon.png' %}" border="0" width="30" height="30" style="margin: 0 0 0 70px;">  {{ contents.price }} nid</p>
                    {% if request.session.user_email == contents.writeremail_id %}
                    {% else %}
                    {% if downloadid %}
                    <a href="../download?id={{ contents.contents_id }}">
                        <img src="{% static 'unid/icon/icons-다운로드버튼.png' %}" border="0" width="155" height="45" style="position: relative; right: 10px; bottom: 6px;" class="pointeffect">
                    </a>                              <!--★★★★★★★★★★★★ㅍ-->
                    {% else %}
                    <button type="button" class="cd-popup-trigger" id='enrollcontents' class="pointeffect">
                        콘텐츠 구매
                    </button>
                    <div class="cd-popup" role="alert">
                        <div class="cd-popup-container">
                            <div class="popuprow1">
                                <h4>컨텐츠를 구입하시겠습니까?</h4>
                            </div>
                            <div class="popuprow2">
                                <ul id='popupinfo'>

                                </ul>
                            </div>
                            <div class="popuprow4">
                                <div class="form-group">
                                    <label for="inputpwd" class="col-sm-10" id="contentsName">계좌 비밀번호를 입력해주세요</label>
                                    <input class="form-control col-sm-12"  style="margin: 0 auto;" id="inputpwd" name="inputpwd" type="password">
                                </div>
                            </div>
                            <div class="popuprow3">
                                컨텐츠는 저자가 책정한 판매가에 따라 구매자가 지불한 니드코인을 통해 보상되며 이더리움 네트워크 사정에 의해 처리속도가 지연될 수 있습니다.
                            </div>
                            <ul class="cd-buttons">
                                <li><a href="#0" class="cd-popup-no">No</a></li>
                                <li><a href="#0" class="cd-popup-buy-yes">Yes</a></li>
                            </ul>
                        </div> <!-- cd-popup-container -->
                    </div> <!-- cd-popup -->
                    <div class="cd-popup3">
                        <div class="cd-popup-container3">
                            <div class="loading-container" >
                                <div class="loading"></div>
                                <div id="loading-text">
                                    <img src="/media/icon-로딩바.png" width="100" height="100">
                                </div>
                            </div>
                            <div class="loading-text2">콘텐츠 구매중입니다...</div>
                            <div class="loading-text3">이더리움 네트워크 사정에 따라 최대 2~3분까지 소요될 수 있으니 잠시만 기다려 주세요.</div>
                        </div> <!-- cd-popup-container -->
                    </div> <!-- cd-popup -->
                    {% endif %}
                    {% endif %}
                </div>
            </div>
        </div>


        <div class="row">
            <div class="contents-tag">
                <div>
                    <img src="{% static 'unid/icon/tag-icon.png' %}" border="0" width="20" height="20">
                    <span>{{ contents.tags }}</span>
                </div>
            </div>
        </div>


        <!-- replyment -->
        <div class="row">
            <div class="contents-reply">
                {% if request.session.user_email == contents.writeremail_id %}
                <div class="icon-boxs afterLogin">
                {% else %}
                <div class="icon-boxs beforeLogin">
                {% endif %}
                    <div class="icon-box">
                        <img src="{% static 'unid/icon/wordballoon-icon.png' %}" border="0" width="20" height="20">
                        {{ contents.replymentcount }}
                    </div>
                    <div class="icon-box">
                        <img src="{% static 'unid/icon/icons-다운로드.png' %}" width="20" height="20">
                        <span>{{ contents.downloadcount }}</span>
                    </div>
                    <div class="icon-box">
                        <img src="{% static 'unid/icon/icons-조회수.png' %}" width="20" height="20">
                        <span>{{ contents.hits }}</span>
                    </div>
                </div>
                {% if request.session.user_email == contents.writeremail_id %}
                <div class="test icon-box">
                    <a href="{% url 'postmodify' contents.contents_id %}">
                        <img src="{% static 'unid/icon/icons-수정.png' %}" width="75" height="30" >
                    </a>
                    <img src="{% static 'unid/icon/icons-삭제.png' %}" width="75" height="30" class="postdelete pointeffect">
                </div>
                {% else %}
                <div class="test icon-box">
                    <a href="">
                        <img src="{% static 'unid/icon/icons-의견보내기.png' %}" width="90" height="30" class="pointeffect opinion">
                    </a>
                </div>
                {% endif %}
                <div class="cd-popup2" role="alert">
                    <div class="cd-popup-container2">
                        <div class="popuprow1">
                            <h4>이 게시물에 대한 의견 보내기</h4>
                            회원님의 소중한 의견은 Unid에서 문제를 파악하는데 사용됩니다.
                        </div>
                        <div class="popupcategory">
                            <label for="inputcategory" class="col-sm-3" >카테고리</label>
                            <select class="form-control col-sm-7" id="inputcategory" name="category">
                                <option title="Combo 1">음란물</option>
                                <option title="Combo 2">혐오발언</option>
                                <option title="Combo 3">폭력</option>
                                <option title="Combo 4">허위정보</option>
                                <option title="Combo 5">저작권 위반</option>
                                <option title="Combo 5">기타</option>
                            </select>
                            <input type="text" class="col-sm-11 form-control" id="exception" placeholder="의견을 입력해주세요">
                        </div>
                        <ul class="cd-buttons">
                            <li class="pointeffect"><a href="#0" class="cd-popup-no111">돌아가기</a></li>
                            <li class="pointeffect"><a href="#0" class="cd-popup-postopinion">보내기</a></li>
                        </ul>
                        <a href="#0" class="cd-popup-close img-replace"></a>
                    </div> <!-- cd-popup-container -->
                </div> <!-- cd-popup -->
                <div class="cd-popup1" role="alert">
                    <div class="cd-popup-container1">
                        <div class="popuprow1">
                            <h4>게시글을 삭제하시겠습니까?</h4>
                        </div>

                        <ul class="cd-buttons">
                            <li><a href="#0" class="cd-popup-no">No</a></li>
                            <li><a href="#0" class="cd-popup-delete-yes">Yes</a></li>
                        </ul>
                        <a href="#0" class="cd-popup-close img-replace"></a>
                    </div> <!-- cd-popup-container -->
                </div> <!-- cd-popup -->
            </div>
        </div>
        <div class="row">
            <div class="reply-list">
                {% for reply in replys %}
                <div class="reply">
                    <div class="reply-picture">
                        {% if reply.writeremail.name == mypage.name %}
                        <a href="/unid/mypage">
                        {% else %}
                        <a href="{% url 'user_detail' reply.writeremail.IDX %}">
                        {% endif %}
                            {% if reply.writeremail.userimage %}
                                <img src="/{{ reply.writeremail.userimage }}" border="0" width="30" height="30" style="border-radius: 25px;">
                            {% else %}
                                <img src="{% static 'unid/icon/profle-icon.png' %}" border="0" width="30" height="30">
                            {% endif %}
                        </a>
                    </div>
                    <div class="reply-id">
                        {% if reply.writeremail.name == mypage.name %}
                        <a href="/unid/mypage" style="color:black">
                        {% else %}
                        <a href="{% url 'user_detail' reply.writeremail.IDX %}" style="color:black">
                        {% endif %}
                            {{ reply.writeremail.name }}
                        </a>
                    </div>
                    <div class="reply-date">
                        {{ reply.created }}
                    </div>
                    <div class="reply-text">
                        {{ reply.replytext }}
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        <div class="row">
            {% if request.session.user_email %}
            <form class="input-reply">
                <textarea rows="5" cols="90" class="form-control" id="inputreplytext" placeholder="댓글을 남겨보세요!"></textarea>
                <input type="button" class="form-control col-sm-2 replybutton pointeffect" value="댓글작성" id="inputreply" repletstyle="margin:0 0 0 600px;">
            </form>
            {% else %}
            <form class="input-reply">
                <textarea rows="5" cols="90" class="form-control" id="inputreplytext" placeholder="유니드계정으로 로그인하고 댓글을 입력해보세요!"></textarea>
                <a href="/unid/login">
                    <input type="button" class="form-control col-sm-2 replybutton pointeffect" value="로그인" id="inputreply" repletstyle="margin:0 0 0 600px;">
                </a>
            </form>
            {% endif %}
        </div>
    </div>
</div>




<script src="http://code.jquery.com/jquery-3.1.1.min.js"></script>
<script>

    jQuery(document).ready(function($){
        $('#nav1').unbind("click");
        $('#nav2').unbind("click");
        $('#nav4').unbind("click");
        $('#nav3').unbind("click");
        $('#id_q').unbind("click");
        $('.navbar-brand').unbind("click");
        $('#nav2').addClass('visible-place');

        $('.postdelete').on('click', function(event) {
            event.preventDefault();
            $('.cd-popup1').addClass('is-visible');
        });
        $('.cd-popup-delete-yes').on('click', function() {
            var id = {{ contents.contents_id }};
            var type = 'contents';
            $.ajax({
                type: 'POST',
                url: '../postdelete/',
                data: {
                        id: id,
                        type: type,
                        csrfmiddlewaretoken: '{{ csrf_token }}'
                },
                success: function(res) {
                    alert(res.Ans);
                    location="{% url 'searchcontents' contents.category %}";
                    }
                });
            });
        //close popup
        $('.cd-popup1').on('click', function(event){
            if( $(event.target).is('.cd-popup-close') || $(event.target).is('.cd-popup1') || $(event.target).is('.cd-popup-no')) {
                event.preventDefault();
                $(this).removeClass('is-visible');
            }
        });
        //close popup when clicking the esc keyboard button
        $(document).keyup(function(event){
            if(event.which=='27'){
                $('.cd-popup1').removeClass('is-visible');
            }

        });
        $('.preview').on('click', function() {
            var id = $(this).attr('name');

            $('.cd-popup4').addClass('is-visible');
        })

        //close popup
        $('.cd-popup4').on('click', function(event){
            if( $(event.target).is('.cd-popup-close') || $(event.target).is('.cd-popup4') || $(event.target).is('.cd-popup-no111')) {
                event.preventDefault();
                $(this).removeClass('is-visible');
            }
        });
        //close popup when clicking the esc keyboard button
        $(document).keyup(function(event){
            if(event.which=='27'){
                $('.cd-popup4').removeClass('is-visible');
            }

        });
        //open popup
        $('.opinion').on('click', function(event){
            event.preventDefault();
            let isUser = "{{ request.session.user_email }}"
            if ( !isUser ) {
                alert("로그인이 필요합니다");
                location="{% url 'login' %}"
            } else {
                $('.cd-popup2').addClass('is-visible');
            };
        });
        $('#inputcategory').on('change', function(event) {
            event.preventDefault();
            let isException = $('#inputcategory').val()
            if (isException == "기타") {
                $('#exception').show();
            } else {
                $('#exception').hide();

            };
        });

        $('.cd-popup-postopinion').on('click', function(event){
            event.preventDefault();
            console.log(1);
            let category = $('#inputcategory').val();
            console.log(5);
            let exceptOpinion = $('#exception').val();
            console.log(4);
            let writeremail = "{{ contents.writeremail.email }}";
            console.log(3);
            let title = "{{ contents.title }}";
            console.log(2);
            let type = "contents";
            console.log(type);

            $.ajax({
                type: 'POST',
                url: '../opinion/',
                data: {
                    id: {{ contents.contents_id }},
                    category: category,
                    exceptOpinion: exceptOpinion,
                    writeremail: writeremail,
                    title: title,
                    type: type,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                    },
                success : function(res) {
                    alert(res.Ans);
                    $('.cd-popup2').removeClass('is-visible');
                    }
                });
            });

        //close popup
        $('.cd-popup2').on('click', function(event){
            if( $(event.target).is('.cd-popup-close') || $(event.target).is('.cd-popup2') || $(event.target).is('.cd-popup-no111')) {
                event.preventDefault();
                $(this).removeClass('is-visible');
            }
        });
        //close popup when clicking the esc keyboard button
        $(document).keyup(function(event){
            if(event.which=='27'){
                $('.cd-popup2').removeClass('is-visible');
            }

        });

        //open popup
        $('.cd-popup-trigger').on('click', function(event){
            event.preventDefault();
            let isUser = "{{ request.session.user_email }}"
            if ( !isUser ) {
                alert("로그인이 필요합니다");
                location="{% url 'login' %}"
            } else {
                $('.cd-popup').addClass('is-visible');
                let contentstitle = "{{ contents.title }}";
                let contentsprice = {{ contents.price }};
                let mybalance = "{{ nid_balance }}";
                console.log(mybalance);

                if ( mybalance == "로그인이 필요합니다" ) {
                    $('#popupinfo').empty();
                    $('#popupinfo').append("<ul class='popupinformationsrow'> <li class='hi' id='popuptitle'>제목 : </li> <li class='popupinformations'>" + contentstitle + "</li> </ul><br>");
                    $('#popupinfo').append("<br><ul class='popupinformationsrow'> <li class='hi' id='popupprice'>가격 : </li> <li class='popupinformations'>" + contentsprice + " nid </li> </ul>");
                    } else {
                        $('#popupinfo').empty();
                        $('#popupinfo').append("<ul class='popupinformationsrow'> <li class='hi' id='popuptitle'>제목 : </li> <li class='popupinformations'>" + contentstitle + "</li> </ul><br>");
                        $('#popupinfo').append("<br><ul class='popupinformationsrow'> <li class='hi' id='popupprice'>가격 : </li> <li class='popupinformations'>" + contentsprice + " nid </li> </ul>");
                        $('#popupinfo').append("<br><ul class='popupinformationsrow'> <li class='hi' id='popupbalance'>내 잔고 : </li> <li class='popupinformations'>" + mybalance + " nid </li> </ul>");
                    };
                };

        });

        //close popup
        $('.cd-popup').on('click', function(event){
            if( $(event.target).is('.cd-popup-close') || $(event.target).is('.cd-popup') || $(event.target).is('.cd-popup-no')) {
                event.preventDefault();
                $(this).removeClass('is-visible');
            }
        });
        //close popup when clicking the esc keyboard button
        $(document).keyup(function(event){
            if(event.which=='27'){
                $('.cd-popup').removeClass('is-visible');
            }

        });
        $('#inputreply').on('click', function() {
            var isUser = "{{ request.session.user_email }}";
            if ( !isUser ) {
                alert("로그인이 필요합니다");
                location="{% url 'login' %}"
            }
            var reply = $('#inputreplytext').val();
            var contents_id = {{ contents.contents_id }};
            $.ajax({
                type: 'POST',
                url: '../writereply/',
                data: {
                    id: contents_id,
                    reply: reply,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                    },
                success : function(res) {
                    alert(res.Ans);
                    var writeremail= res.writeremail;
                    var created= res.created;
                    var replytext= res.replytext;
                    $('#inputreplytext').val("");
                    $('.reply-list').append(`
                                       <div class="reply">
                                            <div class="reply-picture">
                                                <img src="{% static 'unid/icon/profle-icon.png' %}" border="0" width="30" height="30">
                                            </div>
                                            <div class="reply-id">
                                                ${writeremail}
                                            </div>
                                            <div class="reply-date">
                                                ${created}
                                            </div>
                                            <div class="reply-text">
                                                ${replytext}
                                            </div>
                                        </div>
                                `);

                }
            });
        });


        $('.cd-popup-buy-yes').on('click', function() {
            var pwd = $('#inputpwd').val()
            if (!pwd) {
                alert("비밀번호을 적어주세요");
                $('#inputpwd').focus();
                return false;
            }
            var downloadid = Math.random();
            console.log(downloadid);

            var writeremail = "{{ contents.writeremail.email }}";
            var contents_id = {{ contents.contents_id }};
            var contents_title = "{{ contents.title }}";
            var postdata  = {
                    'id': contents_id,
                    'title': contents_title,
                    'csrfmiddlewaretoken': '{{ csrf_token }}'
                    };
            var pwd = $('#inputpwd').val();
            var downloadid = Math.random();
            console.log(writeremail);
            $('.cd-popup').removeClass('is-visible');
            $('.cd-popup3').addClass('is-visible');
            $('#nav1').click(function () {return false;});
            $('#nav2').click(function () {return false;});
            $('#nav4').click(function () {return false;});
            $('#nav3').click(function () {return false;});
            $('.navbar-brand').click(function () {return false;});
            if (event.which=='8') {

                alert('콘텐츠 구매 중에는 뒤로 돌아가실 수 없습니다.')

                return false;
            }
            $.ajax({
                type: 'POST',
                url: "../moneytrade/",
                data : {
                        writeremail: writeremail,
                        id: contents_id,
                        pwd: pwd,
                        csrfmiddlewaretoken: '{{ csrf_token }}'
                        },
                success : function(res) {
                    alert(res.Ans)
                    location="{% url 'contentsdetail' contents.contents_id %}"
                }
            });
        });

    });

</script>
{% endblock %}

